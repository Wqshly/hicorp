-- MySQL Script generated by MySQL Workbench
-- Wed Nov 17 20:37:17 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema hicorp_segment
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `hicorp_segment` ;

-- -----------------------------------------------------
-- Schema hicorp_segment
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `hicorp_segment` DEFAULT CHARACTER SET utf8 ;
USE `hicorp_segment` ;

-- -----------------------------------------------------
-- Table `hicorp_segment`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`user` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`user` (
                                                       `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                       `user_name` VARCHAR(16) NOT NULL COMMENT 'User login account.',
                                                       `password` VARCHAR(255) NOT NULL COMMENT 'User login password',
                                                       `create_user` VARCHAR(45) NOT NULL COMMENT '创建人',
                                                       `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                       `modified_user` VARCHAR(45) NULL DEFAULT NULL COMMENT '修改人',
                                                       `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                       PRIMARY KEY (`id`),
                                                       UNIQUE INDEX `user_name_UNIQUE` (`user_name` ASC) VISIBLE)
    ENGINE = InnoDB
    COMMENT = 'This table just used to authenticate user login, only has account info, don`t has other user info.';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`role`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`role` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`role` (
                                                       `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                       `name` VARCHAR(16) NOT NULL,
                                                       `introduction` VARCHAR(255) NOT NULL,
                                                       `create_user` VARCHAR(45) NOT NULL,
                                                       `create_gmt` DATETIME NOT NULL,
                                                       `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                       `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                       PRIMARY KEY (`id`))
    ENGINE = InnoDB
    COMMENT = 'This table stores role information.';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`user_role_relation`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`user_role_relation` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`user_role_relation` (
                                                                     `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                     `user_id` BIGINT UNSIGNED NOT NULL,
                                                                     `role_id` BIGINT UNSIGNED NOT NULL,
                                                                     `create_user` VARCHAR(45) NOT NULL,
                                                                     `create_gmt` DATETIME NOT NULL,
                                                                     `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                     PRIMARY KEY (`id`),
                                                                     INDEX `fk_user_role_relation_user_idx` (`user_id` ASC) VISIBLE,
                                                                     INDEX `fk_user_role_relation_role_idx` (`role_id` ASC) VISIBLE,
                                                                     CONSTRAINT `fk_user_role_relation_user1`
                                                                         FOREIGN KEY (`user_id`)
                                                                             REFERENCES `hicorp_segment`.`user` (`id`)
                                                                             ON DELETE NO ACTION
                                                                             ON UPDATE NO ACTION,
                                                                     CONSTRAINT `fk_user_role_relation_role1`
                                                                         FOREIGN KEY (`role_id`)
                                                                             REFERENCES `hicorp_segment`.`role` (`id`)
                                                                             ON DELETE NO ACTION
                                                                             ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`menu`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`menu` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`menu` (
                                                       `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                       `parent_id` BIGINT UNSIGNED NULL DEFAULT NULL,
                                                       `menu_orders` INT NOT NULL,
                                                       `path` VARCHAR(255) NOT NULL,
                                                       `title` VARCHAR(45) NOT NULL,
                                                       `icon` VARCHAR(45) NULL DEFAULT NULL,
                                                       `create_gmt` DATETIME NOT NULL,
                                                       `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                       PRIMARY KEY (`id`),
                                                       INDEX `fk_menu_menu_idx` (`parent_id` ASC) VISIBLE,
                                                       CONSTRAINT `fk_menu_menu1`
                                                           FOREIGN KEY (`parent_id`)
                                                               REFERENCES `hicorp_segment`.`menu` (`id`)
                                                               ON DELETE NO ACTION
                                                               ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`role_menu_relation`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`role_menu_relation` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`role_menu_relation` (
                                                                     `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                     `role_id` BIGINT UNSIGNED NOT NULL,
                                                                     `menu_id` BIGINT UNSIGNED NOT NULL,
                                                                     `create_user` VARCHAR(45) NOT NULL,
                                                                     `create_gmt` DATETIME NOT NULL,
                                                                     PRIMARY KEY (`id`),
                                                                     INDEX `fk_role_menu_relation_role1_idx` (`role_id` ASC) VISIBLE,
                                                                     INDEX `fk_role_menu_relation_menu1_idx` (`menu_id` ASC) VISIBLE,
                                                                     CONSTRAINT `fk_role_menu_relation_role1`
                                                                         FOREIGN KEY (`role_id`)
                                                                             REFERENCES `hicorp_segment`.`role` (`id`)
                                                                             ON DELETE NO ACTION
                                                                             ON UPDATE NO ACTION,
                                                                     CONSTRAINT `fk_role_menu_relation_menu1`
                                                                         FOREIGN KEY (`menu_id`)
                                                                             REFERENCES `hicorp_segment`.`menu` (`id`)
                                                                             ON DELETE NO ACTION
                                                                             ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`basic_category_data`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`basic_category_data` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`basic_category_data` (
                                                                      `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                      `number` VARCHAR(45) NOT NULL,
                                                                      `name` VARCHAR(45) NOT NULL,
                                                                      `description` VARCHAR(255) NOT NULL,
                                                                      `type` VARCHAR(45) NOT NULL,
                                                                      `remark` VARCHAR(255) NULL DEFAULT NULL,
                                                                      `create_user` VARCHAR(45) NOT NULL,
                                                                      `create_gmt` DATETIME NOT NULL,
                                                                      `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                      `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                      PRIMARY KEY (`id`),
                                                                      UNIQUE INDEX `number_UNIQUE` (`number` ASC) VISIBLE)
    ENGINE = InnoDB
    COMMENT = '存放基础数据中的那些类别, 如工位类别、模具类别、工具类别等, 以及普通的无上下级关系的基础数据.';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`material_data`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`material_data` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`material_data` (
                                                                `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                `number` VARCHAR(45) NOT NULL,
                                                                `name` VARCHAR(45) NOT NULL,
                                                                `type` ENUM('自制件', '原材料', '零配件') NOT NULL,
                                                                `spec` VARCHAR(45) NULL DEFAULT NULL COMMENT '规格',
                                                                `safety_stock` VARCHAR(45) NULL DEFAULT NULL COMMENT '安全库存',
                                                                `create_user` VARCHAR(45) NOT NULL,
                                                                `create_gmt` DATETIME NOT NULL,
                                                                `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                PRIMARY KEY (`id`),
                                                                UNIQUE INDEX `number_UNIQUE` (`number` ASC) VISIBLE)
    ENGINE = InnoDB
    COMMENT = '物料表\\\\n包含自制件，原材料，零配件';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`bom_data`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`bom_data` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`bom_data` (
                                                           `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                           `number` VARCHAR(45) NOT NULL,
                                                           `material_number` VARCHAR(45) NOT NULL,
                                                           `material_name` VARCHAR(45) NOT NULL,
                                                           `version` VARCHAR(45) NOT NULL,
                                                           `is_enable` TINYINT NOT NULL DEFAULT 1,
                                                           `unit` VARCHAR(45) NOT NULL,
                                                           `compile_user` VARCHAR(45) NULL DEFAULT NULL,
                                                           `reviewer_user` VARCHAR(45) NULL DEFAULT NULL,
                                                           `create_user` VARCHAR(45) NOT NULL,
                                                           `create_gmt` DATETIME NOT NULL,
                                                           `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                           `modified_time` DATETIME NULL DEFAULT NULL,
                                                           PRIMARY KEY (`id`),
                                                           UNIQUE INDEX `number_UNIQUE` (`number` ASC) VISIBLE)
    ENGINE = InnoDB
    COMMENT = 'BOM主表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`bom_detail`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`bom_detail` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`bom_detail` (
                                                             `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                             `bom_number` VARCHAR(45) NOT NULL COMMENT 'BOM主键',
                                                             `parent_id` BIGINT UNSIGNED NULL DEFAULT NULL COMMENT '父类id',
                                                             `parent_material_number` VARCHAR(45) NULL DEFAULT NULL COMMENT '主物料编码(父类物料的编码)',
                                                             `material_number` VARCHAR(45) NOT NULL COMMENT '物料编码',
                                                             `material_name` VARCHAR(45) NOT NULL COMMENT '物料名称',
                                                             `quantity` INT NOT NULL COMMENT '数量',
                                                             `unit` VARCHAR(8) NOT NULL COMMENT '计量单位',
                                                             `create_user` VARCHAR(45) NOT NULL,
                                                             `create_gmt` DATETIME NOT NULL,
                                                             `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                             `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                             PRIMARY KEY (`id`),
                                                             INDEX `fk_bom_relation_bom_relation_idx` (`parent_id` ASC) VISIBLE,
                                                             INDEX `fk_bom_relation_bom_data_idx` (`bom_number` ASC) VISIBLE,
                                                             INDEX `fk_bom_relation_material_data1_idx` (`parent_material_number` ASC) VISIBLE,
                                                             INDEX `fk_bom_relation_material_data2_idx` (`material_number` ASC) VISIBLE,
                                                             CONSTRAINT `fk_bom_relation_bom_relation1`
                                                                 FOREIGN KEY (`parent_id`)
                                                                     REFERENCES `hicorp_segment`.`bom_detail` (`id`)
                                                                     ON DELETE NO ACTION
                                                                     ON UPDATE NO ACTION,
                                                             CONSTRAINT `fk_bom_relation_bom_data1`
                                                                 FOREIGN KEY (`bom_number`)
                                                                     REFERENCES `hicorp_segment`.`bom_data` (`number`)
                                                                     ON DELETE NO ACTION
                                                                     ON UPDATE NO ACTION,
                                                             CONSTRAINT `fk_bom_relation_material_data1`
                                                                 FOREIGN KEY (`parent_material_number`)
                                                                     REFERENCES `hicorp_segment`.`material_data` (`number`)
                                                                     ON DELETE NO ACTION
                                                                     ON UPDATE NO ACTION,
                                                             CONSTRAINT `fk_bom_relation_material_data2`
                                                                 FOREIGN KEY (`material_number`)
                                                                     REFERENCES `hicorp_segment`.`material_data` (`number`)
                                                                     ON DELETE NO ACTION
                                                                     ON UPDATE NO ACTION)
    ENGINE = InnoDB
    COMMENT = '物料关系(BOM子表)';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`process_scheme`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`process_scheme` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`process_scheme` (
                                                                 `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                 `number` VARCHAR(45) NOT NULL COMMENT '方案编码',
                                                                 `name` VARCHAR(45) NOT NULL,
                                                                 `create_user` VARCHAR(45) NOT NULL,
                                                                 `create_gmt` DATETIME NOT NULL,
                                                                 `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                 `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                 PRIMARY KEY (`id`),
                                                                 UNIQUE INDEX `number_UNIQUE` (`number` ASC) VISIBLE)
    ENGINE = InnoDB
    COMMENT = '工艺方案主表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`process_scheme_sub`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`process_scheme_sub` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`process_scheme_sub` (
                                                                     `id` BIGINT UNSIGNED NOT NULL,
                                                                     `process_number` VARCHAR(45) NOT NULL,
                                                                     `scheme_name` VARCHAR(45) NOT NULL COMMENT '工艺方案名称',
                                                                     `process_name` VARCHAR(45) NOT NULL COMMENT '工序名称',
                                                                     `pre_process` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `post_process` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `quality_inspection_scheme` VARCHAR(45) NULL DEFAULT NULL COMMENT '质检方案',
                                                                     `is_compile_process_plan` TINYINT NOT NULL COMMENT '是否编制工序计划',
                                                                     `is_print` TINYINT NOT NULL COMMENT '完工后是否打印标签',
                                                                     `plan_report` VARCHAR(45) NOT NULL COMMENT '是否计划和报工',
                                                                     `participation_role` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `work_description` VARCHAR(255) NULL DEFAULT NULL,
                                                                     `man_hour_quota` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `create_user` VARCHAR(45) NOT NULL,
                                                                     `create_gmt` DATETIME NOT NULL,
                                                                     `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                     PRIMARY KEY (`id`),
                                                                     INDEX `fk_process_scheme_sub_process_scheme1_idx` (`process_number` ASC) VISIBLE,
                                                                     CONSTRAINT `fk_process_scheme_sub_process_scheme1`
                                                                         FOREIGN KEY (`process_number`)
                                                                             REFERENCES `hicorp_segment`.`process_scheme` (`number`)
                                                                             ON DELETE NO ACTION
                                                                             ON UPDATE NO ACTION)
    ENGINE = InnoDB
    COMMENT = '工艺方案子表(工序表)';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`process_scheme_bom`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`process_scheme_bom` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`process_scheme_bom` (
                                                                     `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                     `bom_number` VARCHAR(45) NOT NULL COMMENT 'BOM主键',
                                                                     `material_number` VARCHAR(45) NOT NULL,
                                                                     `material_name` VARCHAR(45) NOT NULL,
                                                                     `process_scheme` VARCHAR(45) NOT NULL,
                                                                     `pre_process` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `post_process` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `quality_inspection_scheme` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `is_compile_process_plan` TINYINT NOT NULL DEFAULT 0 COMMENT '是否编制工序计划',
                                                                     `is_print` TINYINT NOT NULL DEFAULT 0 COMMENT '完工后是否打印标签',
                                                                     `plan_report` VARCHAR(45) NOT NULL COMMENT '是否计划和报工',
                                                                     `participation_role` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `work_description` VARCHAR(255) NULL DEFAULT NULL,
                                                                     `man_hour_quota` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `create_user` VARCHAR(45) NOT NULL,
                                                                     `create_gmt` DATETIME NOT NULL,
                                                                     `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                     `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                     PRIMARY KEY (`id`),
                                                                     INDEX `fk_process_scheme_bom_bom_data1_idx` (`bom_number` ASC) VISIBLE,
                                                                     CONSTRAINT `fk_process_scheme_bom_bom_data1`
                                                                         FOREIGN KEY (`bom_number`)
                                                                             REFERENCES `hicorp_segment`.`bom_data` (`number`)
                                                                             ON DELETE NO ACTION
                                                                             ON UPDATE NO ACTION)
    ENGINE = InnoDB
    COMMENT = '工艺BOM子表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`login_record`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`login_record` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`login_record` (
                                                               `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                               `user_name` VARCHAR(45) NOT NULL,
                                                               `is_logout` TINYINT NOT NULL DEFAULT 0,
                                                               `remote_address` VARCHAR(45) NULL DEFAULT NULL,
                                                               `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                               PRIMARY KEY (`id`),
                                                               INDEX `fk_login_record_user1_idx` (`user_name` ASC) VISIBLE,
                                                               CONSTRAINT `fk_login_record_user1`
                                                                   FOREIGN KEY (`user_name`)
                                                                       REFERENCES `hicorp_segment`.`user` (`user_name`)
                                                                       ON DELETE NO ACTION
                                                                       ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`permission`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`permission` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`permission` (
                                                             `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                             `tag` VARCHAR(45) NOT NULL,
                                                             `method` CHAR(8) NOT NULL,
                                                             `api_path` VARCHAR(255) NOT NULL,
                                                             `operation_id` VARCHAR(255) NULL DEFAULT NULL,
                                                             `summary` VARCHAR(255) NULL DEFAULT NULL,
                                                             `description` VARCHAR(255) NULL DEFAULT NULL,
                                                             `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                             `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                             PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`role_permission_relation`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`role_permission_relation` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`role_permission_relation` (
                                                                           `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                           `role_id` BIGINT UNSIGNED NOT NULL,
                                                                           `permission_id` BIGINT UNSIGNED NOT NULL,
                                                                           `create_user` VARCHAR(45) NOT NULL,
                                                                           `create_gmt` DATETIME NOT NULL,
                                                                           PRIMARY KEY (`id`),
                                                                           INDEX `fk_role_permission_relation_role1_idx` (`role_id` ASC) VISIBLE,
                                                                           INDEX `fk_role_permission_relation_permission1_idx` (`permission_id` ASC) VISIBLE,
                                                                           CONSTRAINT `fk_role_permission_relation_role1`
                                                                               FOREIGN KEY (`role_id`)
                                                                                   REFERENCES `hicorp_segment`.`role` (`id`)
                                                                                   ON DELETE NO ACTION
                                                                                   ON UPDATE NO ACTION,
                                                                           CONSTRAINT `fk_role_permission_relation_permission1`
                                                                               FOREIGN KEY (`permission_id`)
                                                                                   REFERENCES `hicorp_segment`.`permission` (`id`)
                                                                                   ON DELETE NO ACTION
                                                                                   ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`operation_record`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`operation_record` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`operation_record` (
                                                                   `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                   `user_name` VARCHAR(45) NOT NULL COMMENT '执行操作的用户',
                                                                   `ip` VARCHAR(20) NOT NULL COMMENT '用户的ip地址',
                                                                   `operation` VARCHAR(45) NOT NULL COMMENT '具体执行的操作内容',
                                                                   `request_detail` VARCHAR(255) NOT NULL COMMENT '详细请求内容(请求的接口url)',
                                                                   `use_method` VARCHAR(255) NOT NULL COMMENT '发送的请求类别(post/get/delete/put)',
                                                                   `params` TEXT NOT NULL COMMENT '请求的参数',
                                                                   `create_user` VARCHAR(45) NOT NULL COMMENT '创建人',
                                                                   `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                                   `modified_user` VARCHAR(45) NULL DEFAULT NULL COMMENT '修改人',
                                                                   `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                                   PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`approve_status`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`approve_status` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`approve_status` (
                                                                 `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                 `approver_table_name` VARCHAR(45) NOT NULL COMMENT '审批的表的名称',
                                                                 `detail_column_id` BIGINT NOT NULL COMMENT '具体审核的是哪一条单据(数据)',
                                                                 `current_approver` VARCHAR(45) NOT NULL,
                                                                 `is_approved` TINYINT NOT NULL DEFAULT 0,
                                                                 `status` VARCHAR(45) NOT NULL COMMENT '审批状态, 例如: 已通过、已退回、已超时等。',
                                                                 `create_user` VARCHAR(45) NOT NULL,
                                                                 `create_gmt` DATETIME NOT NULL,
                                                                 `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                 `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                 PRIMARY KEY (`id`))
    ENGINE = InnoDB
    COMMENT = '审批状态表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`approve_record`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`approve_record` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`approve_record` (
                                                                 `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                 `approver_table_name` VARCHAR(45) NOT NULL COMMENT '审批的表的名称',
                                                                 `detail_column_id` BIGINT NOT NULL COMMENT '具体审核的是哪一条单据(数据)',
                                                                 `current_approver` VARCHAR(45) NOT NULL,
                                                                 `pre_approver` VARCHAR(45) NULL DEFAULT NULL,
                                                                 `post_approver` VARCHAR(45) NULL DEFAULT NULL,
                                                                 `is_end` TINYINT NOT NULL,
                                                                 `is_approved` TINYINT NOT NULL DEFAULT 0,
                                                                 `approval_comments` VARCHAR(45) NOT NULL COMMENT '审批意见',
                                                                 `status` VARCHAR(45) NOT NULL COMMENT '审批状态, 例如: 已通过、已退回、已超时等。',
                                                                 `create_user` VARCHAR(45) NOT NULL,
                                                                 `create_gmt` DATETIME NOT NULL,
                                                                 `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                 `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                 PRIMARY KEY (`id`))
    ENGINE = InnoDB
    COMMENT = '审批记录表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`device_category`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`device_category` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`device_category` (
                                                                  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                  `purpose` ENUM('前端设备', '机房设备', '路由相关') NOT NULL,
                                                                  `name` VARCHAR(45) NOT NULL COMMENT '类别名称',
                                                                  `number` VARCHAR(45) NOT NULL COMMENT '编号',
                                                                  `brand` VARCHAR(45) NOT NULL,
                                                                  `specification_model` VARCHAR(45) NOT NULL,
                                                                  `unit` VARCHAR(45) NOT NULL,
                                                                  `remarks` VARCHAR(45) NOT NULL,
                                                                  `create_user` VARCHAR(45) NOT NULL,
                                                                  `create_gmt` DATETIME NOT NULL,
                                                                  `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                  `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                  PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`device`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`device` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`device` (
                                                         `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                         `number` VARCHAR(45) NOT NULL COMMENT '设备编号',
                                                         `name` VARCHAR(45) NOT NULL COMMENT '设备名',
                                                         `address` VARCHAR(255) NOT NULL COMMENT '存放点位',
                                                         `status` VARCHAR(45) NOT NULL COMMENT '状态(维修、使用中、年检中、报废等)',
                                                         `use_begin` DATE NOT NULL COMMENT '何时开始使用？',
                                                         `create_user` VARCHAR(45) NOT NULL,
                                                         `create_gmt` DATETIME NOT NULL,
                                                         `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                         `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                         PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`basic_detail_data`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`basic_detail_data` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`basic_detail_data` (
                                                                    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                    `number` VARCHAR(45) NOT NULL,
                                                                    `name` VARCHAR(45) NOT NULL,
                                                                    `category_number` VARCHAR(45) NOT NULL,
                                                                    `category_name` VARCHAR(45) NOT NULL,
                                                                    `description` VARCHAR(255) NOT NULL,
                                                                    `type` VARCHAR(45) NULL DEFAULT NULL,
                                                                    `remark` VARCHAR(255) NULL DEFAULT NULL,
                                                                    `create_user` VARCHAR(45) NOT NULL,
                                                                    `create_gmt` DATETIME NOT NULL,
                                                                    `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                    `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                    PRIMARY KEY (`id`),
                                                                    INDEX `fk_basic_detail_data_basic_category_data1_idx` (`category_number` ASC) VISIBLE,
                                                                    CONSTRAINT `fk_basic_detail_data_basic_category_data1`
                                                                        FOREIGN KEY (`category_number`)
                                                                            REFERENCES `hicorp_segment`.`basic_category_data` (`number`)
                                                                            ON DELETE NO ACTION
                                                                            ON UPDATE NO ACTION)
    ENGINE = InnoDB
    COMMENT = '基础数据中那些类别的子项，如：工位、仓库、模具、工具等';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`factory`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`factory` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`factory` (
                                                          `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                          `number` VARCHAR(45) NOT NULL,
                                                          `name` VARCHAR(55) NOT NULL,
                                                          `phone_number` VARCHAR(45) NOT NULL COMMENT '联系方式(手机号)',
                                                          `address` VARCHAR(255) NOT NULL,
                                                          `legal_person` VARCHAR(45) NOT NULL,
                                                          `zip_code` VARCHAR(45) NOT NULL,
                                                          `remark` VARCHAR(255) NULL DEFAULT NULL COMMENT '备注',
                                                          `create_user` VARCHAR(45) NOT NULL,
                                                          `create_gmt` DATETIME NOT NULL,
                                                          `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                          `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                          PRIMARY KEY (`id`),
                                                          UNIQUE INDEX `name_UNIQUE` (`name` ASC) VISIBLE,
                                                          UNIQUE INDEX `number_UNIQUE` (`number` ASC) VISIBLE)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`mould`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`mould` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`mould` (
                                                        `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                        `base_number` VARCHAR(45) NOT NULL COMMENT '基础编码',
                                                        `number` VARCHAR(45) NOT NULL COMMENT '模具编码',
                                                        `type_number` VARCHAR(45) NOT NULL COMMENT '模具类别编号',
                                                        `type_name` VARCHAR(45) NOT NULL COMMENT '模具类别名称',
                                                        `rfid_number` VARCHAR(45) NULL DEFAULT NULL COMMENT 'RFID标签识别号',
                                                        `manufacturer` VARCHAR(45) NOT NULL COMMENT '生产厂家',
                                                        `specification_size` VARCHAR(45) NOT NULL COMMENT '规格、尺寸',
                                                        `unit` VARCHAR(45) NOT NULL COMMENT '单位(规格)',
                                                        `cumulative_usage_times` INT NOT NULL COMMENT '累计使用次数',
                                                        `incoming_time` DATETIME NOT NULL COMMENT '入厂时间',
                                                        `create_user` VARCHAR(45) NOT NULL,
                                                        `create_gmt` DATETIME NOT NULL,
                                                        `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                        `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                        PRIMARY KEY (`id`),
                                                        INDEX `fk_mould_basic_category_data1_idx` (`type_number` ASC) VISIBLE,
                                                        CONSTRAINT `fk_mould_basic_category_data1`
                                                            FOREIGN KEY (`type_number`)
                                                                REFERENCES `hicorp_segment`.`basic_category_data` (`number`)
                                                                ON DELETE NO ACTION
                                                                ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`workshop`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`workshop` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`workshop` (
                                                           `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                           `number` VARCHAR(45) NOT NULL,
                                                           `name` VARCHAR(45) NOT NULL,
                                                           `factory_number` VARCHAR(45) NOT NULL,
                                                           `factory_name` VARCHAR(45) NOT NULL,
                                                           `charge_person` VARCHAR(45) NULL DEFAULT NULL,
                                                           `create_user` VARCHAR(45) NOT NULL,
                                                           `create_gmt` DATETIME NOT NULL,
                                                           `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                           `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                           PRIMARY KEY (`id`),
                                                           INDEX `fk_workshop_factory1_idx` (`factory_number` ASC) VISIBLE,
                                                           INDEX `fk_workshop_factory2_idx` (`factory_name` ASC) VISIBLE,
                                                           CONSTRAINT `fk_workshop_factory1`
                                                               FOREIGN KEY (`factory_number`)
                                                                   REFERENCES `hicorp_segment`.`factory` (`number`)
                                                                   ON DELETE NO ACTION
                                                                   ON UPDATE NO ACTION,
                                                           CONSTRAINT `fk_workshop_factory2`
                                                               FOREIGN KEY (`factory_name`)
                                                                   REFERENCES `hicorp_segment`.`factory` (`name`)
                                                                   ON DELETE NO ACTION
                                                                   ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`approve_process`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`approve_process` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`approve_process` (
                                                                  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                  `number` VARCHAR(45) NOT NULL,
                                                                  `name` VARCHAR(45) NOT NULL COMMENT '审批流名称',
                                                                  `type` VARCHAR(45) NOT NULL COMMENT '审批类别',
                                                                  `content` VARCHAR(255) NULL DEFAULT NULL COMMENT '审批内容',
                                                                  `create_user` VARCHAR(45) NOT NULL,
                                                                  `create_gmt` DATETIME NOT NULL,
                                                                  `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                                  `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                                  PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`default_approver`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`default_approver` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`default_approver` (
                                                                   `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                   `approve_process_id` BIGINT UNSIGNED NOT NULL,
                                                                   `level` INT NOT NULL COMMENT '审批级别',
                                                                   `approver` VARCHAR(45) NOT NULL COMMENT '审批人',
                                                                   PRIMARY KEY (`id`),
                                                                   INDEX `fk_approve_process_sub_approve_process1_idx` (`approve_process_id` ASC) VISIBLE,
                                                                   CONSTRAINT `fk_approve_process_sub_approve_process1`
                                                                       FOREIGN KEY (`approve_process_id`)
                                                                           REFERENCES `hicorp_segment`.`approve_process` (`id`)
                                                                           ON DELETE NO ACTION
                                                                           ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`contract_team`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`contract_team` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`contract_team` (
                                                               `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                               `number` VARCHAR(45) NOT NULL,
                                                               `name` VARCHAR(45) NOT NULL COMMENT '承包队名',
                                                               `charge_person` VARCHAR(45) NOT NULL COMMENT '负责人',
                                                               `phone_number` VARCHAR(45) NOT NULL COMMENT '15305016015',
                                                               `create_user` VARCHAR(45) NOT NULL,
                                                               `create_gmt` DATETIME NOT NULL,
                                                               `modified_user` VARCHAR(45) NULL DEFAULT NULL,
                                                               `modified_gmt` DATETIME NULL DEFAULT NULL,
                                                               PRIMARY KEY (`id`),
                                                               UNIQUE INDEX `number_UNIQUE` (`number` ASC) VISIBLE)
    ENGINE = InnoDB
    COMMENT = '承包队';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`external_staff`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`external_staff` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`external_staff` (
                                                                 `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                 `user_account` VARCHAR(16) NULL DEFAULT NULL,
                                                                 `contract_team_number` VARCHAR(45) NOT NULL,
                                                                 `contract_team_name` VARCHAR(45) NOT NULL COMMENT '所属承包队队名',
                                                                 `number` VARCHAR(45) NOT NULL COMMENT '工号',
                                                                 `name` VARCHAR(45) NOT NULL COMMENT '姓名',
                                                                 `phone` CHAR(11) NOT NULL,
                                                                 `sex` TINYINT NOT NULL COMMENT '性别',
                                                                 `identify` VARCHAR(18) NULL DEFAULT NULL COMMENT '身份证号',
                                                                 `is_user` TINYINT NOT NULL DEFAULT 0 COMMENT '是否注册用户(默认为否)',
                                                                 `create_user` VARCHAR(45) NOT NULL COMMENT '创建人',
                                                                 `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                                 `modified_user` VARCHAR(45) NULL DEFAULT NULL COMMENT '修改人',
                                                                 `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                                 PRIMARY KEY (`id`),
                                                                 INDEX `fk_external_staff_user1_idx` (`user_account` ASC) VISIBLE,
                                                                 INDEX `fk_external_staff_contract_team1_idx` (`contract_team_number` ASC) VISIBLE,
                                                                 CONSTRAINT `fk_external_staff_user1`
                                                                     FOREIGN KEY (`user_account`)
                                                                         REFERENCES `hicorp_segment`.`user` (`user_name`)
                                                                         ON DELETE NO ACTION
                                                                         ON UPDATE NO ACTION,
                                                                 CONSTRAINT `fk_external_staff_contract_team1`
                                                                     FOREIGN KEY (`contract_team_number`)
                                                                         REFERENCES `hicorp_segment`.`contract_team` (`number`)
                                                                         ON DELETE NO ACTION
                                                                         ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`staff`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`staff` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`staff` (
                                                        `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                        `number` VARCHAR(45) NOT NULL COMMENT '工号',
                                                        `name` VARCHAR(45) NOT NULL COMMENT '姓名',
                                                        `phone` CHAR(11) NOT NULL,
                                                        `sex` TINYINT NOT NULL COMMENT '性别',
                                                        `identify` VARCHAR(18) NULL DEFAULT NULL COMMENT '身份证号',
                                                        `birthday` DATETIME NULL COMMENT '生日',
                                                        `entry_time` DATETIME NULL COMMENT '入职时间',
                                                        `user_account` VARCHAR(16) NULL DEFAULT NULL,
                                                        `is_user` TINYINT NOT NULL DEFAULT 0 COMMENT '是否注册用户(默认为否)',
                                                        `create_user` VARCHAR(45) NOT NULL COMMENT '创建人',
                                                        `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                        `modified_user` VARCHAR(45) NULL DEFAULT NULL COMMENT '修改人',
                                                        `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                        PRIMARY KEY (`id`),
                                                        INDEX `fk_staff_user1_idx` (`user_account` ASC) VISIBLE,
                                                        CONSTRAINT `fk_staff_user1`
                                                            FOREIGN KEY (`user_account`)
                                                                REFERENCES `hicorp_segment`.`user` (`user_name`)
                                                                ON DELETE NO ACTION
                                                                ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hicorp_segment`.`customer`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`customer` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`customer` (
                                                           `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键',
                                                           `number` VARCHAR(45) NOT NULL COMMENT '客户编码',
                                                           `name` VARCHAR(45) NOT NULL COMMENT '客户姓名',
                                                           `full_name` VARCHAR(255) NOT NULL COMMENT '全称',
                                                           `contact_person` VARCHAR(45) NOT NULL COMMENT '联系人',
                                                           `email` VARCHAR(45) NULL COMMENT '邮箱',
                                                           `address` VARCHAR(255) NOT NULL COMMENT '地址',
                                                           `phone_number` VARCHAR(45) NOT NULL COMMENT '手机号',
                                                           `remark` VARCHAR(255) NULL,
                                                           `create_user` VARCHAR(45) NOT NULL COMMENT '创建人',
                                                           `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                           `modified_user` VARCHAR(45) NULL DEFAULT NULL COMMENT '修改人',
                                                           `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                           PRIMARY KEY (`id`),
                                                           UNIQUE INDEX `number_UNIQUE` (`number` ASC) VISIBLE)
    ENGINE = InnoDB
    COMMENT = '客户表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`contract`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`contract` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`contract` (
                                                           `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键',
                                                           `number` VARCHAR(45) NOT NULL COMMENT '合同编号',
                                                           `name` VARCHAR(45) NOT NULL COMMENT '合同名称',
                                                           `customer_number` VARCHAR(45) NOT NULL COMMENT '客户编号',
                                                           `customer_name` VARCHAR(45) NOT NULL COMMENT '客户名称(简称)',
                                                           `contract_date` DATETIME NOT NULL COMMENT '签约日期',
                                                           `start_date` DATETIME NOT NULL COMMENT '合同开始日期',
                                                           `ending_date` DATETIME NOT NULL COMMENT '合同结束日期',
                                                           `status_code` VARCHAR(45) NOT NULL,
                                                           `status` VARCHAR(45) NOT NULL,
                                                           `total_amount` DECIMAL(8,2) NOT NULL COMMENT '合同总金额',
                                                           `progress` VARCHAR(45) NULL COMMENT '合同进度',
                                                           `create_user` VARCHAR(45) NOT NULL COMMENT '创建人',
                                                           `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                           `modified_user` VARCHAR(45) NULL DEFAULT NULL COMMENT '修改人',
                                                           `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                           PRIMARY KEY (`id`),
                                                           UNIQUE INDEX `number_UNIQUE` (`number` ASC) VISIBLE,
                                                           INDEX `fk_contract_customer1_idx` (`customer_number` ASC) VISIBLE,
                                                           CONSTRAINT `fk_contract_customer1`
                                                               FOREIGN KEY (`customer_number`)
                                                                   REFERENCES `hicorp_segment`.`customer` (`number`)
                                                                   ON DELETE NO ACTION
                                                                   ON UPDATE NO ACTION)
    ENGINE = InnoDB
    COMMENT = '合同表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`contract_sub`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`contract_sub` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`contract_sub` (
                                                               `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                               `contract_number` VARCHAR(45) NOT NULL COMMENT '合同表编号',
                                                               `material_number` VARCHAR(45) NOT NULL COMMENT '官环物料编码',
                                                               `model` VARCHAR(45) NOT NULL COMMENT '型号',
                                                               `requirement` VARCHAR(45) NULL COMMENT '技术要求',
                                                               `unit` VARCHAR(45) NOT NULL COMMENT '单位',
                                                               `number` INT NOT NULL COMMENT '数量',
                                                               `phone_number` VARCHAR(45) NULL COMMENT '电话',
                                                               `create_user` VARCHAR(45) NOT NULL COMMENT '创建人',
                                                               `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                               `modified_user` VARCHAR(45) NULL DEFAULT NULL COMMENT '修改人',
                                                               `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                               PRIMARY KEY (`id`),
                                                               INDEX `fk_contract_sub_contract1_idx` (`contract_number` ASC) VISIBLE,
                                                               CONSTRAINT `fk_contract_sub_contract1`
                                                                   FOREIGN KEY (`contract_number`)
                                                                       REFERENCES `hicorp_segment`.`contract` (`number`)
                                                                       ON DELETE NO ACTION
                                                                       ON UPDATE NO ACTION)
    ENGINE = InnoDB
    COMMENT = '合同子表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`actual_orders`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`actual_orders` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`actual_orders` (
                                                                `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                PRIMARY KEY (`id`))
    ENGINE = InnoDB
    COMMENT = '实际销售订单表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`actual_orders_sub`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`actual_orders_sub` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`actual_orders_sub` (
                                                                    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                    PRIMARY KEY (`id`))
    ENGINE = InnoDB
    COMMENT = '实际销售订单子表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`annex`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`annex` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`annex` (
                                                        `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                        `table_name` VARCHAR(45) NOT NULL COMMENT '附件所关联的表',
                                                        `row_id` BIGINT NOT NULL COMMENT '附件所对应的行ID',
                                                        `name` VARCHAR(45) NOT NULL COMMENT '附件名称',
                                                        `path` VARCHAR(45) NOT NULL COMMENT '附件存储路径',
                                                        `create_user` VARCHAR(45) NOT NULL COMMENT '创建人',
                                                        `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                        `modified_user` VARCHAR(45) NULL DEFAULT NULL COMMENT '修改人',
                                                        `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                        PRIMARY KEY (`id`))
    ENGINE = InnoDB
    COMMENT = '附件表, 存所有的附件.';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`original_orders`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`original_orders` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`original_orders` (
                                                                  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                  `number` VARCHAR(45) NOT NULL COMMENT '订单编码',
                                                                  `name` VARCHAR(45) NOT NULL COMMENT '订单名称(项目名称)',
                                                                  `contract_number` VARCHAR(45) NOT NULL COMMENT '合同号',
                                                                  `contract_name` VARCHAR(45) NOT NULL COMMENT '合同名称',
                                                                  `customer_number` VARCHAR(45) NOT NULL COMMENT '客户编号',
                                                                  `customer_name` VARCHAR(45) NOT NULL COMMENT '客户名称(简称)',
                                                                  `table_number` VARCHAR(45) NOT NULL COMMENT '表格编码',
                                                                  `unit_leader` VARCHAR(45) NOT NULL COMMENT '单位负责人',
                                                                  `auditor` VARCHAR(45) NULL COMMENT '审核人',
                                                                  `reviewer` VARCHAR(45) NULL COMMENT '复核人',
                                                                  `preparation_person` VARCHAR(45) NOT NULL COMMENT '编制人',
                                                                  `preparation_date` DATETIME NOT NULL COMMENT '编制日期',
                                                                  `remark` VARCHAR(255) NULL COMMENT '备注',
                                                                  `create_user` VARCHAR(45) NOT NULL COMMENT '创建人',
                                                                  `create_gmt` DATETIME NOT NULL COMMENT '创建时间',
                                                                  `modified_user` VARCHAR(45) NULL DEFAULT NULL COMMENT '修改人',
                                                                  `modified_gmt` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
                                                                  PRIMARY KEY (`id`),
                                                                  INDEX `fk_original_orders_contract1_idx` (`contract_number` ASC) VISIBLE,
                                                                  CONSTRAINT `fk_original_orders_contract1`
                                                                      FOREIGN KEY (`contract_number`)
                                                                          REFERENCES `hicorp_segment`.`contract` (`number`)
                                                                          ON DELETE NO ACTION
                                                                          ON UPDATE NO ACTION)
    ENGINE = InnoDB
    COMMENT = '原始订单表';


-- -----------------------------------------------------
-- Table `hicorp_segment`.`original_orders_sub`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `hicorp_segment`.`original_orders_sub` ;

CREATE TABLE IF NOT EXISTS `hicorp_segment`.`original_orders_sub` (
                                                                      `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
                                                                      PRIMARY KEY (`id`))
    ENGINE = InnoDB
    COMMENT = '原始订单子表';


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
